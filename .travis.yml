language: objective-c
osx_image: xcode10

env:
  global:
    - WORKSPACE=RidiOAuth2.xcodeproj/project.xcworkspace

matrix:
  include:
    - env: DESTINATION="arch=x86_64" SCHEME=macOS SDK="macosx"
    - env: DESTINATION="platform=iOS Simulator,name=iPhone 7,OS=11.4" SCHEME=iOS SDK="iphonesimulator"

script:
  - xcodebuild -workspace $WORKSPACE -scheme RidiOAuth2Tests-$SCHEME -sdk "$SDK" -destination "$DESTINATION" -configuration Debug ONLY_ACTIVE_ARCH=NO test | xcpretty -c

notifications:
  email: false
  slack:
    rooms:
      - 'rididev:KMm0EBQYY1ThicCJo0CwYb5U'
    on_success: change
